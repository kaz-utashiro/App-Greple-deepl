# Greple -Mxlate モジュール サンプルファイル

このディレクトリには、Greple の -Mxlate モジュールを使ってファイルを自
動翻訳する例が含まれています。

翻訳したい文書ファイルを置いて、make コマンドを実行するだけで必要なファ
イルを生成します。現時点で対象としているのは、以下の種類のファイルです。

- `*.docx`
- `*.pptx`
- `*.txt`
- `*.md`
- `*.pm`

## 生成ファイル

特に指定がない場合には、翻訳対象言語毎に `xtxt`, `cm`, `ifdef` の3種類
のファイルが作られます。

たとえば、`Document.txt` というファイルを日本語に翻訳する場合、

    Document.txt.JA.xtxt
    Document.txt.JA.cm
    Document.txt.JA.ifdef

という3つのファイルが生成されます。`xtxt` ファイルには、翻訳済みの文章
のみ、`cm` と `ifdef` には原文と翻訳文章の両方が含まれます。

## 制御ファイル

対象ファイルに特定の拡張子が付いたファイルがあると、その内容によって翻
訳処理を制御することができます。たとえば、`Document.txt` というファイ
ルと共に `Document.txt.LANG` というファイルがあれば、その中に書かれて
いる言語に翻訳します。

### *.LANG

翻訳対象言語の指定。

### *.FORMAT

翻訳形式を指定。`xtxt`、`cm`、`ifdef` の中から指定します。

## 翻訳処理

デフォルトの動作では、翻訳対象となるテキストをクリップボードにコピーし
て、翻訳処理を促すプロンプトが表示されます。DeepL のアプリケーションや
ウェブインタフェースを使ってそれを翻訳し、結果を再びクリップボードにコ
ピーして、エンターキーを入力します。

### 文字数制限

フリーアカウントで実行している場合には、一度に5000文字までしか処理でき
ないので、すべてのテキストの処理が終わるまでこの作業を繰り返します。

有料アカウントを使っていて、処理する文字数に制限がない場合には `MAXLEN`
という変数に上限を設定して実行してください。

    make MAXLEN=100000

### API を利用する

API を使って翻訳する場合には `deepl` コマンドがインストールされている
必要があります。`USEAPI` という変数をセットして make を実行してくださ
い。

    make USEAPI=yes

## make で利用する変数

### DEBUG

デバッグモードをオンにします。

### MAXLEN

一度に処理する最大文字数を設定します。

### USEAPI

DeepL の API を使って翻訳します。
